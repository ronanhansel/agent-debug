ENVIRONMENT SETUP (Pre-configured):
- R packages are pre-installed via conda (tidyverse, dplyr, ggplot2, rmarkdown, knitr, lme4, etc.)
- Bioconductor packages (GSVA) are available
- Use: conda activate agent
- R library path: ./.R/library

---
1. Conda installations are BLOCKED by Terms of Service:
   DO NOT attempt conda install commands - they will fail.

   - Error: 'fatal error: ft2build.h: No such file or directory'
   - FreeType headers are required for tidyverse but not installed
   - Cannot install system libraries via apt-get

3. R package installation limitations:
   - Packages requiring compilation (stringi, systemfonts, etc.) will fail
   - Only use packages that are already pre-installed
   - Check available packages: Rscript -e "installed.packages()[,'Package']"

4. Figure generation issues:
   - If graphics packages are unavailable, figure generation will fail
   - Use options(bitmapType = 'cairo') if png() fails

5. Alternative approaches:

   a) Check what R packages are already installed:
      Rscript -e "installed.packages()[,'Package']"

   b) If tidyverse is not installed:
      - Report as environmental limitation
      - Use base R alternatives if possible:
        * read.csv() instead of readr::read_csv()
        * subset(), merge() instead of dplyr functions
        * base R plotting instead of ggplot2

   c) Create required output directories:
      mkdir -p ../results/tables ../results/figures
      mkdir -p ../results/for_publication/tables ../results/for_publication/figures

   d) If figure generation fails:
      - Report that graphics output is blocked
      - Focus on numeric/table outputs if possible

6. Environment setup:
   conda activate hal
   mkdir -p ../results/tables ../results/figures
   # Do NOT run conda install or install.packages()

7. Output directory: HAL_OUTPUT_DIR (../results).

Original task: Generate figures and tables from R analysis.
